---
// Simple video thumbnail that exactly mirrors VideoHero (which works!)
export interface Props {
  playbackId: string;
  title?: string;
  width?: string;
  height?: string;
}

const {
  playbackId,
  title = "Video",
  width = "100%",
  height = "100%"
} = Astro.props;

const muxEnvKey = import.meta.env.PUBLIC_MUX_ENV_KEY || "26hi0t52rcm3pl738jugp7sp8";
---

<!-- Exact same structure as VideoHero, just smaller -->
<div class="relative w-full h-full overflow-hidden rounded-lg">
  <mux-player
    playback-id={playbackId}
    metadata-video-title={title}
    metadata-video-id={`thumb-${playbackId}`}
    metadata-viewer-user-id="thumbnail-viewer"
    env-key={muxEnvKey}
    autoplay
    muted
    loop
    max-resolution="720p"
    style={`width: ${width}; height: ${height}; object-fit: cover;`}
    class="w-full h-full"
    preload="metadata"
    controls="false"
    default-hidden-captions="true"
    disable-cookies="true"
  >
  </mux-player>
</div>