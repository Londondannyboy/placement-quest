---
export const prerender = true;
import Layout from '../../layouts/Layout.astro';
import { sanityClient } from 'sanity:client';

const tags = await sanityClient.fetch(`
  *[_type == "tag"] | order(title asc) {
    _id,
    title,
    slug,
    "postCount": count(*[_type == "post" && references(^._id)])
  }
`);
---

<Layout title="Tags - Relocation Quest">
  <main class="container mx-auto px-4 py-8 max-w-6xl">
    <h1 class="text-4xl font-bold mb-8">Article Tags</h1>
    
    <div class="flex flex-wrap gap-4 mb-12">
      {tags.filter((tag) => tag.slug?.current).map((tag) => (
        <a 
          href={`/tags/${tag.slug.current}`}
          class="inline-flex items-center px-4 py-2 bg-blue-100 text-blue-800 rounded-full hover:bg-blue-200 transition-colors"
        >
          <span class="font-medium">{tag.title}</span>
          <span class="ml-2 text-sm bg-blue-200 px-2 py-1 rounded-full">
            {tag.postCount}
          </span>
        </a>
      ))}
    </div>
    
    {tags.length === 0 && (
      <div class="text-center py-12">
        <p class="text-gray-500 text-lg">No tags available yet.</p>
      </div>
    )}
  </main>
</Layout>