---
// Simple iframe embed for Mux videos
export interface Props {
  playbackId: string;
  title?: string;
  width?: string;
  height?: string;
  autoplay?: boolean;
}

const {
  playbackId,
  title = "Video",
  width = "100%",
  height = "100%",
  autoplay = true
} = Astro.props;

// Build the iframe URL with parameters
const iframeUrl = `https://player.mux.com/${playbackId}?metadata-video-title=${encodeURIComponent(title)}&autoplay=${autoplay}&muted=true&loop=true&controls=false`;
---

<div class="relative w-full h-full overflow-hidden rounded-lg">
  <iframe
    src={iframeUrl}
    style={`width: ${width}; height: ${height}; border: none; aspect-ratio: 16/9;`}
    allow="accelerometer; gyroscope; autoplay; encrypted-media; picture-in-picture;"
    allowfullscreen
    loading="lazy"
    title={title}
  ></iframe>
</div>